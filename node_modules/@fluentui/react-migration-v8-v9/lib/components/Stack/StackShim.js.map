{"version":3,"sources":["StackShim.tsx"],"sourcesContent":["import { mergeClasses } from '@griffel/react';\nimport { classNamesFunction } from '@fluentui/react';\nimport type { IStackProps, IStackTokens, IStackItemProps } from '@fluentui/react';\nimport * as React from 'react';\n\nimport { getChildrenGapStyles } from './stackUtils';\nimport type { StackShimStyles } from './stackUtils';\nimport {\n  useFlexAlignItemsStyles,\n  useFlexGrowStyles,\n  useFlexJustifyContentStyles,\n  useStackStyles,\n} from './StackShim.styles';\n\nconst stackClassNames = {\n  root: 'ms-Stack',\n  inner: 'ms-Stack-inner',\n};\n\nconst getClassNames = classNamesFunction<IStackProps, StackShimStyles>();\n\nexport const StackShim = (props: IStackProps) => {\n  const styles = useStackStyles();\n  const alignItemsFlexStyles = useFlexAlignItemsStyles();\n  const justifyContentFlexStyles = useFlexJustifyContentStyles();\n  const growFlexStyles: Record<string, string> = useFlexGrowStyles();\n\n  const {\n    as: RootType = 'div',\n    verticalFill,\n    horizontal,\n    reversed,\n    grow,\n    wrap,\n    horizontalAlign,\n    verticalAlign,\n    disableShrink,\n    className,\n  } = props;\n\n  const tokens: IStackTokens = { ...props.tokens };\n\n  let tokensRootStyles = {};\n  let tokensInnerStyles = {};\n  let childrenGapClassName;\n\n  if (tokens) {\n    tokensRootStyles = {\n      padding: !wrap ? tokens.padding : undefined,\n      maxHeight: tokens.maxHeight,\n      maxWidth: tokens.maxWidth,\n    };\n\n    tokensInnerStyles = {\n      padding: wrap ? tokens.padding : undefined,\n    };\n\n    if (tokens.childrenGap) {\n      childrenGapClassName = getClassNames(getChildrenGapStyles, {\n        horizontal,\n        reversed,\n        tokens,\n      });\n    }\n  }\n\n  const stackStyles = [\n    wrap ? styles.wrap : styles.root,\n    horizontal && styles.horizontal,\n    verticalFill && styles.verticalFill,\n  ];\n\n  const stackInnerStyles = [\n    styles.inner,\n    horizontal && styles.horizontal,\n    (!tokens || !tokens.childrenGap) && styles.innerWidth,\n  ];\n\n  let stackChildren = React.Children.toArray(props.children);\n  if (\n    stackChildren.length === 1 &&\n    React.isValidElement(stackChildren[0]) &&\n    stackChildren[0].type === React.Fragment\n  ) {\n    stackChildren = stackChildren[0].props.children;\n  }\n\n  stackChildren = React.Children.map(\n    stackChildren as React.ReactElement[],\n    (child: React.ReactElement<IStackItemProps>) => {\n      if (!child) {\n        return null;\n      }\n\n      if (child.type && ((child as React.ReactElement).type as React.ComponentType).name === 'StackItemShim') {\n        const defaultItemProps: IStackItemProps = {\n          shrink: !disableShrink,\n        };\n\n        return React.cloneElement(child, {\n          ...defaultItemProps,\n          ...child.props,\n        });\n      }\n\n      return child;\n    },\n  );\n\n  if (reversed) {\n    if (horizontal) {\n      stackStyles.push(styles.reversedHorizontal);\n      stackInnerStyles.push(styles.reversedHorizontal);\n    } else {\n      stackStyles.push(styles.reversedVertical);\n      stackInnerStyles.push(styles.reversedVertical);\n    }\n  }\n\n  if (grow) {\n    const flexGrow = grow === true ? growFlexStyles[1] : growFlexStyles[grow];\n    stackStyles.push(flexGrow);\n  }\n\n  if (disableShrink) {\n    stackStyles.push(styles.disableShrink);\n  }\n\n  if (horizontalAlign) {\n    if (horizontal) {\n      stackStyles.push(justifyContentFlexStyles[horizontalAlign]);\n      stackInnerStyles.push(justifyContentFlexStyles[horizontalAlign]);\n    } else {\n      stackStyles.push(alignItemsFlexStyles[horizontalAlign]);\n      stackInnerStyles.push(alignItemsFlexStyles[horizontalAlign]);\n    }\n  }\n\n  if (verticalAlign) {\n    if (horizontal) {\n      stackStyles.push(alignItemsFlexStyles[verticalAlign]);\n      stackInnerStyles.push(alignItemsFlexStyles[verticalAlign]);\n    } else {\n      stackStyles.push(justifyContentFlexStyles[verticalAlign]);\n      stackInnerStyles.push(justifyContentFlexStyles[verticalAlign]);\n    }\n  }\n\n  const rootClass = mergeClasses(\n    stackClassNames.root,\n    ...stackStyles,\n    childrenGapClassName && !wrap && childrenGapClassName.root,\n    className,\n  );\n\n  const innerClass = mergeClasses(\n    stackClassNames.inner,\n    ...stackInnerStyles,\n    childrenGapClassName && wrap && childrenGapClassName.inner,\n  );\n\n  return wrap ? (\n    <RootType className={rootClass} style={tokensRootStyles}>\n      <div className={innerClass} style={tokensInnerStyles}>\n        {stackChildren}\n      </div>\n    </RootType>\n  ) : (\n    <RootType className={rootClass} style={tokensRootStyles}>\n      {stackChildren}\n    </RootType>\n  );\n};\n"],"names":["mergeClasses","classNamesFunction","React","getChildrenGapStyles","useFlexAlignItemsStyles","useFlexGrowStyles","useFlexJustifyContentStyles","useStackStyles","stackClassNames","root","inner","getClassNames","StackShim","props","styles","alignItemsFlexStyles","justifyContentFlexStyles","growFlexStyles","as","RootType","verticalFill","horizontal","reversed","grow","wrap","horizontalAlign","verticalAlign","disableShrink","className","tokens","tokensRootStyles","tokensInnerStyles","childrenGapClassName","padding","undefined","maxHeight","maxWidth","childrenGap","stackStyles","stackInnerStyles","innerWidth","stackChildren","Children","toArray","children","length","isValidElement","type","Fragment","map","child","name","defaultItemProps","shrink","cloneElement","push","reversedHorizontal","reversedVertical","flexGrow","rootClass","innerClass","style","div"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}