{"version":3,"sources":["StackShim.tsx"],"sourcesContent":["import { mergeClasses } from '@griffel/react';\nimport { classNamesFunction } from '@fluentui/react';\nimport type { IStackProps, IStackTokens, IStackItemProps } from '@fluentui/react';\nimport * as React from 'react';\n\nimport { getChildrenGapStyles } from './stackUtils';\nimport type { StackShimStyles } from './stackUtils';\nimport {\n  useFlexAlignItemsStyles,\n  useFlexGrowStyles,\n  useFlexJustifyContentStyles,\n  useStackStyles,\n} from './StackShim.styles';\n\nconst stackClassNames = {\n  root: 'ms-Stack',\n  inner: 'ms-Stack-inner',\n};\n\nconst getClassNames = classNamesFunction<IStackProps, StackShimStyles>();\n\nexport const StackShim = (props: IStackProps) => {\n  const styles = useStackStyles();\n  const alignItemsFlexStyles = useFlexAlignItemsStyles();\n  const justifyContentFlexStyles = useFlexJustifyContentStyles();\n  const growFlexStyles: Record<string, string> = useFlexGrowStyles();\n\n  const {\n    as: RootType = 'div',\n    verticalFill,\n    horizontal,\n    reversed,\n    grow,\n    wrap,\n    horizontalAlign,\n    verticalAlign,\n    disableShrink,\n    className,\n  } = props;\n\n  const tokens: IStackTokens = { ...props.tokens };\n\n  let tokensRootStyles = {};\n  let tokensInnerStyles = {};\n  let childrenGapClassName;\n\n  if (tokens) {\n    tokensRootStyles = {\n      padding: !wrap ? tokens.padding : undefined,\n      maxHeight: tokens.maxHeight,\n      maxWidth: tokens.maxWidth,\n    };\n\n    tokensInnerStyles = {\n      padding: wrap ? tokens.padding : undefined,\n    };\n\n    if (tokens.childrenGap) {\n      childrenGapClassName = getClassNames(getChildrenGapStyles, {\n        horizontal,\n        reversed,\n        tokens,\n      });\n    }\n  }\n\n  const stackStyles = [\n    wrap ? styles.wrap : styles.root,\n    horizontal && styles.horizontal,\n    verticalFill && styles.verticalFill,\n  ];\n\n  const stackInnerStyles = [\n    styles.inner,\n    horizontal && styles.horizontal,\n    (!tokens || !tokens.childrenGap) && styles.innerWidth,\n  ];\n\n  let stackChildren = React.Children.toArray(props.children);\n  if (\n    stackChildren.length === 1 &&\n    React.isValidElement(stackChildren[0]) &&\n    stackChildren[0].type === React.Fragment\n  ) {\n    stackChildren = stackChildren[0].props.children;\n  }\n\n  stackChildren = React.Children.map(\n    stackChildren as React.ReactElement[],\n    (child: React.ReactElement<IStackItemProps>) => {\n      if (!child) {\n        return null;\n      }\n\n      if (child.type && ((child as React.ReactElement).type as React.ComponentType).name === 'StackItemShim') {\n        const defaultItemProps: IStackItemProps = {\n          shrink: !disableShrink,\n        };\n\n        return React.cloneElement(child, {\n          ...defaultItemProps,\n          ...child.props,\n        });\n      }\n\n      return child;\n    },\n  );\n\n  if (reversed) {\n    if (horizontal) {\n      stackStyles.push(styles.reversedHorizontal);\n      stackInnerStyles.push(styles.reversedHorizontal);\n    } else {\n      stackStyles.push(styles.reversedVertical);\n      stackInnerStyles.push(styles.reversedVertical);\n    }\n  }\n\n  if (grow) {\n    const flexGrow = grow === true ? growFlexStyles[1] : growFlexStyles[grow];\n    stackStyles.push(flexGrow);\n  }\n\n  if (disableShrink) {\n    stackStyles.push(styles.disableShrink);\n  }\n\n  if (horizontalAlign) {\n    if (horizontal) {\n      stackStyles.push(justifyContentFlexStyles[horizontalAlign]);\n      stackInnerStyles.push(justifyContentFlexStyles[horizontalAlign]);\n    } else {\n      stackStyles.push(alignItemsFlexStyles[horizontalAlign]);\n      stackInnerStyles.push(alignItemsFlexStyles[horizontalAlign]);\n    }\n  }\n\n  if (verticalAlign) {\n    if (horizontal) {\n      stackStyles.push(alignItemsFlexStyles[verticalAlign]);\n      stackInnerStyles.push(alignItemsFlexStyles[verticalAlign]);\n    } else {\n      stackStyles.push(justifyContentFlexStyles[verticalAlign]);\n      stackInnerStyles.push(justifyContentFlexStyles[verticalAlign]);\n    }\n  }\n\n  const rootClass = mergeClasses(\n    stackClassNames.root,\n    ...stackStyles,\n    childrenGapClassName && !wrap && childrenGapClassName.root,\n    className,\n  );\n\n  const innerClass = mergeClasses(\n    stackClassNames.inner,\n    ...stackInnerStyles,\n    childrenGapClassName && wrap && childrenGapClassName.inner,\n  );\n\n  return wrap ? (\n    <RootType className={rootClass} style={tokensRootStyles}>\n      <div className={innerClass} style={tokensInnerStyles}>\n        {stackChildren}\n      </div>\n    </RootType>\n  ) : (\n    <RootType className={rootClass} style={tokensRootStyles}>\n      {stackChildren}\n    </RootType>\n  );\n};\n"],"names":["StackShim","stackClassNames","root","inner","getClassNames","classNamesFunction","props","styles","useStackStyles","alignItemsFlexStyles","useFlexAlignItemsStyles","justifyContentFlexStyles","useFlexJustifyContentStyles","growFlexStyles","useFlexGrowStyles","as","RootType","verticalFill","horizontal","reversed","grow","wrap","horizontalAlign","verticalAlign","disableShrink","className","tokens","tokensRootStyles","tokensInnerStyles","childrenGapClassName","padding","undefined","maxHeight","maxWidth","childrenGap","getChildrenGapStyles","stackStyles","stackInnerStyles","innerWidth","stackChildren","React","Children","toArray","children","length","isValidElement","type","Fragment","map","child","name","defaultItemProps","shrink","cloneElement","push","reversedHorizontal","reversedVertical","flexGrow","rootClass","mergeClasses","innerClass","createElement","style","div"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}